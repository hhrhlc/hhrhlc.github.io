{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Book list Google\u8fd0\u7ef4\u89e3\u5bc6 SALTSTACK\u6280\u672f\u5165\u95e8\u4e0e\u5b9e\u6218 \u7cbe\u901aSALTSTACK Python\u8bed\u8a00\u53ca\u5176\u5e94\u7528 Python Cookbook Effective Python \u89e3\u5fe7\u6742\u8d27\u94fa Curriculum vitae 2014/11 - 2015/02 2015/05 - 2017/08 2017/09 - 2019/02","title":"about"},{"location":"#book-list","text":"Google\u8fd0\u7ef4\u89e3\u5bc6 SALTSTACK\u6280\u672f\u5165\u95e8\u4e0e\u5b9e\u6218 \u7cbe\u901aSALTSTACK Python\u8bed\u8a00\u53ca\u5176\u5e94\u7528 Python Cookbook Effective Python \u89e3\u5fe7\u6742\u8d27\u94fa","title":"Book list"},{"location":"#curriculum-vitae","text":"2014/11 - 2015/02 2015/05 - 2017/08 2017/09 - 2019/02","title":"Curriculum vitae"},{"location":"devops/devops/","text":"DevOps Criterion \u786c\u4ef6 \u8d44\u4ea7\u7f16\u53f7 \u8d44\u4ea7\u7c7b\u578b \u5f81\u7528\u6807\u51c6 \u7cfb\u7edf \u521d\u59cb\u914d\u7f6e \u6743\u9650\u63a7\u5236 \u76d1\u63a7\u6807\u51c6 \u5e94\u7528 \u67b6\u6784\u89c4\u8303 \u90e8\u7f72\u89c4\u8303 \u914d\u7f6e\u89c4\u8303 \u8fed\u4ee3\u6807\u51c6 \u64cd\u4f5c \u4e1a\u52a1\u53d1\u5e03 \u6545\u969c\u6574\u7406 \u8d44\u4ea7\u5de1\u68c0 \u5de5\u4f5c\u62a5\u8868 \u76ee\u6807 \u6587\u6863\u5316 Tools \u5de5\u5177 \u4fc3\u8fdb\u6807\u51c6\u5316\u7684\u5b9e\u65bd\u5c06\u591a\u6b21\u64cd\u4f5c\u6d41\u7a0b\u5316\uff0c\u7b80\u5316\u91cd\u590d\u64cd\u4f5c\u51cf\u5c11\u4eba\u4e3a\u64cd\u4f5c\u964d\u4f4e\u6545\u969c\u7387\u3002 \u754c\u9762 \u5f31\u5316\u64cd\u4f5c\u6d41\u7a0b\uff0c\u7b80\u5316\u64cd\u4f5c\u6b65\u9aa4\uff0c\u6743\u9650\u7ba1\u7406\u63a7\u5236\uff0c\u64cd\u4f5c\u65e5\u5fd7\u8bb0\u5f55\u3002 Service \u4e13\u6ce8 \u5c06\u5404\u4e2a\u5de5\u4f5c\u5c01\u88c5\u6210\u4e00\u4e2a\u670d\u52a1\uff0c\u5404\u9879\u4e1a\u52a1\u7684\u8fb9\u754c\u6e05\u6670\u660e\u4e86\u3002 \u590d\u7528 \u901a\u8fc7\u670d\u52a1\u5316\u63d0\u4f9b\u4e86\u5927\u91cf\u7684API\uff0c\u5e2e\u52a9\u5b9e\u73b0\u4e1a\u52a1\u7684\u590d\u7528\u3002 \u7ba1\u7406 \u66f4\u52a0\u7cbe\u51c6\u7684\u95ee\u9898\u53d1\u73b0\uff0c\u4f18\u5316\u67d0\u9879\u4e1a\u52a1\u3002 Ai \u81ea\u52a8\u4fee\u590d \u81ea\u52a8\u5347\u7ea7","title":"DevOps"},{"location":"devops/devops/#devops","text":"","title":"DevOps"},{"location":"devops/devops/#criterion","text":"\u786c\u4ef6 \u8d44\u4ea7\u7f16\u53f7 \u8d44\u4ea7\u7c7b\u578b \u5f81\u7528\u6807\u51c6 \u7cfb\u7edf \u521d\u59cb\u914d\u7f6e \u6743\u9650\u63a7\u5236 \u76d1\u63a7\u6807\u51c6 \u5e94\u7528 \u67b6\u6784\u89c4\u8303 \u90e8\u7f72\u89c4\u8303 \u914d\u7f6e\u89c4\u8303 \u8fed\u4ee3\u6807\u51c6 \u64cd\u4f5c \u4e1a\u52a1\u53d1\u5e03 \u6545\u969c\u6574\u7406 \u8d44\u4ea7\u5de1\u68c0 \u5de5\u4f5c\u62a5\u8868 \u76ee\u6807 \u6587\u6863\u5316","title":"Criterion"},{"location":"devops/devops/#tools","text":"\u5de5\u5177 \u4fc3\u8fdb\u6807\u51c6\u5316\u7684\u5b9e\u65bd\u5c06\u591a\u6b21\u64cd\u4f5c\u6d41\u7a0b\u5316\uff0c\u7b80\u5316\u91cd\u590d\u64cd\u4f5c\u51cf\u5c11\u4eba\u4e3a\u64cd\u4f5c\u964d\u4f4e\u6545\u969c\u7387\u3002 \u754c\u9762 \u5f31\u5316\u64cd\u4f5c\u6d41\u7a0b\uff0c\u7b80\u5316\u64cd\u4f5c\u6b65\u9aa4\uff0c\u6743\u9650\u7ba1\u7406\u63a7\u5236\uff0c\u64cd\u4f5c\u65e5\u5fd7\u8bb0\u5f55\u3002","title":"Tools"},{"location":"devops/devops/#service","text":"\u4e13\u6ce8 \u5c06\u5404\u4e2a\u5de5\u4f5c\u5c01\u88c5\u6210\u4e00\u4e2a\u670d\u52a1\uff0c\u5404\u9879\u4e1a\u52a1\u7684\u8fb9\u754c\u6e05\u6670\u660e\u4e86\u3002 \u590d\u7528 \u901a\u8fc7\u670d\u52a1\u5316\u63d0\u4f9b\u4e86\u5927\u91cf\u7684API\uff0c\u5e2e\u52a9\u5b9e\u73b0\u4e1a\u52a1\u7684\u590d\u7528\u3002 \u7ba1\u7406 \u66f4\u52a0\u7cbe\u51c6\u7684\u95ee\u9898\u53d1\u73b0\uff0c\u4f18\u5316\u67d0\u9879\u4e1a\u52a1\u3002","title":"Service"},{"location":"devops/devops/#ai","text":"\u81ea\u52a8\u4fee\u590d \u81ea\u52a8\u5347\u7ea7","title":"Ai"},{"location":"others/crayfish/","text":"Crayfish Prepare \u9f99\u867e * 1000g \u5185\u810f \u867e\u9ec4 \u867e\u7ebf \u7259\u5237 \u6e05\u6c34 * 3c \u84b8\u9505 * 6min Operations \u70ed\u6cb9 1/\u52a8\u7269\u6cb9, 1/\u690d\u7269\u6cb9 max \u5927\u6599 \u59dc\u849c, \u5c0f\u7c73\u8fa3, \u5c16\u6912, \u6ce1\u6912, \u82b1\u6912, \u6d77\u6912(\u5e72) \u5fb7\u5e84 * 150g (\u6d77\u5357\u9ec4\u706f\u7b3c\u9171\u4e86\u89e3\u4e0b) \u9f99\u867e \u5341\u4e09\u9999 \u767d\u9152 \u751f\u62bd \u5564\u9152(\u9ea6\u9999) \u767d\u7cd6, \u76d0, \u9171\u6cb9 8min \u9752\u7b0b, \u9ec4\u74dc \u9e21\u7cbe, \u8d77\u9505\u6599 Finish \u8fc7\u6ee4\u6c64\u6c41 \u767d\u829d\u9ebb \u5c0f\u8471","title":"Crayfish"},{"location":"others/crayfish/#crayfish","text":"","title":"Crayfish"},{"location":"others/crayfish/#prepare","text":"\u9f99\u867e * 1000g \u5185\u810f \u867e\u9ec4 \u867e\u7ebf \u7259\u5237 \u6e05\u6c34 * 3c \u84b8\u9505 * 6min","title":"Prepare"},{"location":"others/crayfish/#operations","text":"\u70ed\u6cb9 1/\u52a8\u7269\u6cb9, 1/\u690d\u7269\u6cb9 max \u5927\u6599 \u59dc\u849c, \u5c0f\u7c73\u8fa3, \u5c16\u6912, \u6ce1\u6912, \u82b1\u6912, \u6d77\u6912(\u5e72) \u5fb7\u5e84 * 150g (\u6d77\u5357\u9ec4\u706f\u7b3c\u9171\u4e86\u89e3\u4e0b) \u9f99\u867e \u5341\u4e09\u9999 \u767d\u9152 \u751f\u62bd \u5564\u9152(\u9ea6\u9999) \u767d\u7cd6, \u76d0, \u9171\u6cb9 8min \u9752\u7b0b, \u9ec4\u74dc \u9e21\u7cbe, \u8d77\u9505\u6599","title":"Operations"},{"location":"others/crayfish/#finish","text":"\u8fc7\u6ee4\u6c64\u6c41 \u767d\u829d\u9ebb \u5c0f\u8471","title":"Finish"},{"location":"others/mkdocs/","text":"Mkdocs Installation $ pip install mkdocs Getting Started $ mkdocs new hhrhlc.github.io.git $ cd hhrhlc.github.io.git $ mkdocs serve -a 0.0.0.0:80 Adding Page $ echo \"# Thanksgiving\" > docs/about.md Configure $ cat mkdocs.yml site_name: Xuan repo_url : https://github.com/hhrhlc/ theme : simplex remote_branch: master remote_name : origin nav: - about: \"index.md\" - system: [] - python: [] - devops: [] - others: [] - web: [] - dbs: [] - container: []","title":"Mkdocs"},{"location":"others/mkdocs/#mkdocs","text":"","title":"Mkdocs"},{"location":"others/mkdocs/#installation","text":"$ pip install mkdocs","title":"Installation"},{"location":"others/mkdocs/#getting-started","text":"$ mkdocs new hhrhlc.github.io.git $ cd hhrhlc.github.io.git $ mkdocs serve -a 0.0.0.0:80","title":"Getting Started"},{"location":"others/mkdocs/#adding-page","text":"$ echo \"# Thanksgiving\" > docs/about.md","title":"Adding Page"},{"location":"others/mkdocs/#configure","text":"$ cat mkdocs.yml site_name: Xuan repo_url : https://github.com/hhrhlc/ theme : simplex remote_branch: master remote_name : origin nav: - about: \"index.md\" - system: [] - python: [] - devops: [] - others: [] - web: [] - dbs: [] - container: []","title":"Configure"},{"location":"python/pyenv/","text":"PyEnv Python $ cd ~/.pyenv/plugins/python-build/share/python-build/ $ sed -i s@https://www.python.org/ftp@http://npm.taobao.org/mirrors@g 2.7.12 $ pyenv install 2.7.12 Pip $ vim ~/.pip/pip.conf [global] index-url = http://pypi.douban.com/simple trusted-host = pypi.douban.com","title":"PyEnv"},{"location":"python/pyenv/#pyenv","text":"","title":"PyEnv"},{"location":"python/pyenv/#python","text":"$ cd ~/.pyenv/plugins/python-build/share/python-build/ $ sed -i s@https://www.python.org/ftp@http://npm.taobao.org/mirrors@g 2.7.12 $ pyenv install 2.7.12","title":"Python"},{"location":"python/pyenv/#pip","text":"$ vim ~/.pip/pip.conf [global] index-url = http://pypi.douban.com/simple trusted-host = pypi.douban.com","title":"Pip"},{"location":"system/linux_disk_inode/","text":"Linux_disk_inode Problem $ touch index.php touch: cannot touch `index.php': No space left on device $ df -h Filesystem Size Used Avail Use% Mounted on /dev/sda5 50G 4.0G 43G 9% / tmpfs 24G 0 24G 0% /dev/shm /dev/sda1 190M 39M 141M 22% /boot /dev/sda2 493G 302G 166G 65% /data $ df -i Filesystem Inodes IUsed IFree IUse% Mounted on /dev/sda5 3293184 51539 3241645 2% / tmpfs 6170528 1 6170527 1% /dev/shm /dev/sda1 51200 39 51161 1% /boot /dev/sda2 32768000 32768000 0 100% /data inode\u8017\u5c3d Solution $ for i in /*; do echo $i; find $i | wc -l | sort -nr; done \u9010\u5c42\u8fdb\u5165inode\u5360\u7528\u6700\u9ad8\u7684\u76ee\u5f55, \u7ee7\u7eed\u6267\u884c\u4e0a\u8ff0\u6307\u4ee4, \u53d1\u73b0 /var/spool/postfix/maildrop/ \u4e0b\u6587\u4ef6\u6bd4\u8f83\u591a, \u5220\u9664\u540e\u5c31\u53ef\u4ee5\u91ca\u653einode. \u6ce8\u610f\u8fd9\u91cc\u4e0d\u80fd\u7528 rm \u5220\u9664, \u6709\u53ef\u80fd\u56e0\u4e3a\u6587\u4ef6\u6570\u91cf\u592a\u591a\u800c\u51fa\u73b0 Argument list too long \u9519\u8bef. find . -name \"*\" | xargs rm -rf Avoid \u907f\u514d\u4ea7\u751f\u90ae\u4ef6, \u53ef\u4ee5\u5728\u8ba1\u5212\u4efb\u52a1\u540e\u52a0\u4e0a > /dev/null 2>&1 */5 * * * * /usr/sbin/ntpdate pool.ntp.org > /dev/null 2>&1","title":"Linux_disk_inode"},{"location":"system/linux_disk_inode/#linux_disk_inode","text":"","title":"Linux_disk_inode"},{"location":"system/linux_disk_inode/#problem","text":"$ touch index.php touch: cannot touch `index.php': No space left on device $ df -h Filesystem Size Used Avail Use% Mounted on /dev/sda5 50G 4.0G 43G 9% / tmpfs 24G 0 24G 0% /dev/shm /dev/sda1 190M 39M 141M 22% /boot /dev/sda2 493G 302G 166G 65% /data $ df -i Filesystem Inodes IUsed IFree IUse% Mounted on /dev/sda5 3293184 51539 3241645 2% / tmpfs 6170528 1 6170527 1% /dev/shm /dev/sda1 51200 39 51161 1% /boot /dev/sda2 32768000 32768000 0 100% /data inode\u8017\u5c3d","title":"Problem"},{"location":"system/linux_disk_inode/#solution","text":"$ for i in /*; do echo $i; find $i | wc -l | sort -nr; done \u9010\u5c42\u8fdb\u5165inode\u5360\u7528\u6700\u9ad8\u7684\u76ee\u5f55, \u7ee7\u7eed\u6267\u884c\u4e0a\u8ff0\u6307\u4ee4, \u53d1\u73b0 /var/spool/postfix/maildrop/ \u4e0b\u6587\u4ef6\u6bd4\u8f83\u591a, \u5220\u9664\u540e\u5c31\u53ef\u4ee5\u91ca\u653einode. \u6ce8\u610f\u8fd9\u91cc\u4e0d\u80fd\u7528 rm \u5220\u9664, \u6709\u53ef\u80fd\u56e0\u4e3a\u6587\u4ef6\u6570\u91cf\u592a\u591a\u800c\u51fa\u73b0 Argument list too long \u9519\u8bef. find . -name \"*\" | xargs rm -rf","title":"Solution"},{"location":"system/linux_disk_inode/#avoid","text":"\u907f\u514d\u4ea7\u751f\u90ae\u4ef6, \u53ef\u4ee5\u5728\u8ba1\u5212\u4efb\u52a1\u540e\u52a0\u4e0a > /dev/null 2>&1 */5 * * * * /usr/sbin/ntpdate pool.ntp.org > /dev/null 2>&1","title":"Avoid"},{"location":"system/mailx_send/","text":"Mailx_send Installation $ yum -y install mailx $ systemclt stop postfix Configure $ vim /etc/mail.rc # 163 set from=\"github@163.com\" set smtp=smtp.163.com set smtp-auth-user=github set smtp-auth-password=password set smpt-auth=login # qq #set from=123456@qq.com #set smtp=smtp.exmail.qq.com #set smtp-auth-user=123456 #set smtp-auth-password=password #set smtp-auth=login Send Mail $ echo \"\u90ae\u4ef6\u5185\u5bb9\" | mailx -s \"\u90ae\u4ef6\u6807\u9898\" aaa@xxx.com Problem $ echo \"content\" | mailx -s \"title\" 123456789@qq.com $ smtp-server: 553 Mail from must equal authorized user \"/root/dead.letter\" 11/294 . . . message not sent. Solution 163 : \u8bbe\u7f6e -> POP3/SMTP/IMAP -> \u5ba2\u6237\u7aef\u6388\u6743\u5bc6\u7801 qq : \u8bbe\u7f6e -> \u8d26\u53f7 -> POP3/IMAP/SMTP/Exchange/CardDAV/CalDAV\u670d\u52a1 -> \u5f00\u542f","title":"Mailx_send"},{"location":"system/mailx_send/#mailx_send","text":"","title":"Mailx_send"},{"location":"system/mailx_send/#installation","text":"$ yum -y install mailx $ systemclt stop postfix","title":"Installation"},{"location":"system/mailx_send/#configure","text":"$ vim /etc/mail.rc # 163 set from=\"github@163.com\" set smtp=smtp.163.com set smtp-auth-user=github set smtp-auth-password=password set smpt-auth=login # qq #set from=123456@qq.com #set smtp=smtp.exmail.qq.com #set smtp-auth-user=123456 #set smtp-auth-password=password #set smtp-auth=login","title":"Configure"},{"location":"system/mailx_send/#send-mail","text":"$ echo \"\u90ae\u4ef6\u5185\u5bb9\" | mailx -s \"\u90ae\u4ef6\u6807\u9898\" aaa@xxx.com","title":"Send Mail"},{"location":"system/mailx_send/#problem","text":"$ echo \"content\" | mailx -s \"title\" 123456789@qq.com $ smtp-server: 553 Mail from must equal authorized user \"/root/dead.letter\" 11/294 . . . message not sent.","title":"Problem"},{"location":"system/mailx_send/#solution","text":"163 : \u8bbe\u7f6e -> POP3/SMTP/IMAP -> \u5ba2\u6237\u7aef\u6388\u6743\u5bc6\u7801 qq : \u8bbe\u7f6e -> \u8d26\u53f7 -> POP3/IMAP/SMTP/Exchange/CardDAV/CalDAV\u670d\u52a1 -> \u5f00\u542f","title":"Solution"},{"location":"system/openVpn_shadowsocks/","text":"OpenVpn_shadowsocks Path CentOS : 7.4 OpenVpn: 2.4.6(yum) Installation $ yum -y install lz4-devel net-tools lzo-devel pam-devel openssl-devel $ yum -y install openvpn easy-rsa Configurg OpenVpn Server $ cp /usr/share/doc/openvpn-2.4.6/sample/sample-config-files/server.conf /etc/openvpn/ $ vim /etc/openvpn/server.conf port 1194 proto udp dev tun ca /etc/openvpn/easy-rsa/3.0/pki/ca.crt cert /etc/openvpn/easy-rsa/3.0/pki/issued/server.crt key /etc/openvpn/easy-rsa/3.0/pki/private/server.key dh /etc/openvpn/easy-rsa/3.0/pki/dh.pem tls-auth /etc/openvpn/ta.key 0 server 10.8.0.0 255.255.255.0 ifconfig-pool-persist ipp.txt push \"dhcp-option DNS 114.114.114.114\" push \"dhcp-option DNS 208.67.222.222\" push \"dhcp-option DNS 208.67.220.220\" keepalive 10 120 cipher AES-256-CBC comp-lzo max-clients 100 user openvpn group openvpn persist-key persist-tun status /tmp/openvpn-status.log log-append /tmp/openvpn.log verb 3 mute 20 explicit-exit-notify 1 Configure Certificates $ cp -R /usr/share/easy-rsa /etc/openvpn/ $ vim /etc/openvpn/easy-rsa/3.0/vars # 45 65 76 84-89 97 105 113 117 134 139 171 180 192 set_var EASYRSA \"$PWD\" set_var EASYRSA_PKI \"$EASYRSA/pki\" set_var EASYRSA_DN \"cn_only\" set_var EASYRSA_REQ_COUNTRY \"CN\" set_var EASYRSA_REQ_PROVINCE \"SiChuan\" set_var EASYRSA_REQ_CITY \"ChengDu\" set_var EASYRSA_REQ_ORG \"server\" set_var EASYRSA_REQ_EMAIL \"server@server.net\" set_var EASYRSA_REQ_OU \"server\" set_var EASYRSA_KEY_SIZE 2048 set_var EASYRSA_ALGO rsa set_var EASYRSA_CA_EXPIRE 3650 set_var EASYRSA_CERT_EXPIRE 3650 set_var EASYRSA_NS_SUPPORT \"no\" set_var EASYRSA_NS_COMMENT \"Easy-RSA Generated Certificate\" set_var EASYRSA_EXT_DIR \"$EASYRSA/x509-types\" set_var EASYRSA_SSL_CONF \"$EASYRSA/openssl-1.0.cnf\" set_var EASYRSA_DIGEST \"sha256\" Generate Certificates $ cd /etc/openvpn/easy-rsa/3.0 $ ./easyrsa init-pki $ ./easyrsa build-ca Enter PEM pass phrase: PASSWORD Verifying - Enter PEM pass phrase: PASSWORD Common Name (eg: your user, host, or server name) [Easy-RSA CA]: $ cd /etc/openvpn/easy-rsa/3.0 $ ./easyrsa gen-dh $ openvpn --genkey --secret ta.key $ cp -r ta.key /etc/openvpn/ $ ./easyrsa gen-req server Enter PEM pass phrase: PASSWORD Verifying - Enter PEM pass phrase: PASSWORD Common Name (eg: your user, host, or server name) [server]: $ ./easyrsa sign-req server server Confirm request details: `yes` Enter pass phrase for /etc/openvpn/easy-rsa/3.0/pki/private/ca.key: PASSWORD Configure Firewalld $ vim /etc/sysctl.conf net.ipv4.ip_forward = 1 $ sysctl -p $ firewall-cmd --state $ firewall-cmd --zone=public --list-all $ firewall-cmd --add-service=openvpn --permanent $ firewall-cmd --add-port=1194/udp --permanent $ firewall-cmd --add-source=10.8.0.0 --permanent $ firewall-cmd --query-source=10.8.0.0 --permanent $ firewall-cmd --add-masquerade --permanent $ firewall-cmd --query-masquerade --permanent $ firewall-cmd --reload Started OpenVpn Server openvpn --config /etc/openvpn/server.conf --daemon --askpass Enter Private Key Password: PASSWORD Create User $ cd /etc/openvpn/easy-rsa/3.0 $ ./easyrsa build-client-full client_001 Enter PEM pass phrase: CLIENT_001_PASSWORD Verifying - Enter PEM pass phrase: CLIENT_001_PASSWORD Enter pass phrase for /etc/openvpn/easy-rsa/3.0/pki/private/ca.key: PASSWORD Client https://openvpn.net/index.php/open-source/downloads.html # /etc/openvpn/easy-rsa/3.0/pki/issued/client_001.crt # /etc/openvpn/easy-rsa/3.0/pki/private/client_002.key # /etc/openvpn/easy-rsa/3.0/pki/ca.crt # /etc/openvpn/ta.key $ vim client_001.ovpn client remote `REMOTE IPADDRESS` 1194 dev tun proto udp ca ca.crt cert client_001.crt key client_001.key persist-key persist-tun tls-auth ta.key 1 keepalive 10 120 resolv-retry infinite ns-cert-type server nobind comp-lzo verb 5 redirect-gateway route-method exe route-delay 2 status user_001-status.log log-append user_001.log Shadowsocks server https://github.com/v2ray/v2ray-core https://intmainreturn0.com/v2ray-config-gen client https://github.com/shadowsocks","title":"OpenVpn_shadowsocks"},{"location":"system/openVpn_shadowsocks/#openvpn_shadowsocks","text":"","title":"OpenVpn_shadowsocks"},{"location":"system/openVpn_shadowsocks/#path","text":"CentOS : 7.4 OpenVpn: 2.4.6(yum)","title":"Path"},{"location":"system/openVpn_shadowsocks/#installation","text":"$ yum -y install lz4-devel net-tools lzo-devel pam-devel openssl-devel $ yum -y install openvpn easy-rsa","title":"Installation"},{"location":"system/openVpn_shadowsocks/#configurg-openvpn-server","text":"$ cp /usr/share/doc/openvpn-2.4.6/sample/sample-config-files/server.conf /etc/openvpn/ $ vim /etc/openvpn/server.conf port 1194 proto udp dev tun ca /etc/openvpn/easy-rsa/3.0/pki/ca.crt cert /etc/openvpn/easy-rsa/3.0/pki/issued/server.crt key /etc/openvpn/easy-rsa/3.0/pki/private/server.key dh /etc/openvpn/easy-rsa/3.0/pki/dh.pem tls-auth /etc/openvpn/ta.key 0 server 10.8.0.0 255.255.255.0 ifconfig-pool-persist ipp.txt push \"dhcp-option DNS 114.114.114.114\" push \"dhcp-option DNS 208.67.222.222\" push \"dhcp-option DNS 208.67.220.220\" keepalive 10 120 cipher AES-256-CBC comp-lzo max-clients 100 user openvpn group openvpn persist-key persist-tun status /tmp/openvpn-status.log log-append /tmp/openvpn.log verb 3 mute 20 explicit-exit-notify 1","title":"Configurg OpenVpn Server"},{"location":"system/openVpn_shadowsocks/#configure-certificates","text":"$ cp -R /usr/share/easy-rsa /etc/openvpn/ $ vim /etc/openvpn/easy-rsa/3.0/vars # 45 65 76 84-89 97 105 113 117 134 139 171 180 192 set_var EASYRSA \"$PWD\" set_var EASYRSA_PKI \"$EASYRSA/pki\" set_var EASYRSA_DN \"cn_only\" set_var EASYRSA_REQ_COUNTRY \"CN\" set_var EASYRSA_REQ_PROVINCE \"SiChuan\" set_var EASYRSA_REQ_CITY \"ChengDu\" set_var EASYRSA_REQ_ORG \"server\" set_var EASYRSA_REQ_EMAIL \"server@server.net\" set_var EASYRSA_REQ_OU \"server\" set_var EASYRSA_KEY_SIZE 2048 set_var EASYRSA_ALGO rsa set_var EASYRSA_CA_EXPIRE 3650 set_var EASYRSA_CERT_EXPIRE 3650 set_var EASYRSA_NS_SUPPORT \"no\" set_var EASYRSA_NS_COMMENT \"Easy-RSA Generated Certificate\" set_var EASYRSA_EXT_DIR \"$EASYRSA/x509-types\" set_var EASYRSA_SSL_CONF \"$EASYRSA/openssl-1.0.cnf\" set_var EASYRSA_DIGEST \"sha256\"","title":"Configure Certificates"},{"location":"system/openVpn_shadowsocks/#generate-certificates","text":"$ cd /etc/openvpn/easy-rsa/3.0 $ ./easyrsa init-pki $ ./easyrsa build-ca Enter PEM pass phrase: PASSWORD Verifying - Enter PEM pass phrase: PASSWORD Common Name (eg: your user, host, or server name) [Easy-RSA CA]: $ cd /etc/openvpn/easy-rsa/3.0 $ ./easyrsa gen-dh $ openvpn --genkey --secret ta.key $ cp -r ta.key /etc/openvpn/ $ ./easyrsa gen-req server Enter PEM pass phrase: PASSWORD Verifying - Enter PEM pass phrase: PASSWORD Common Name (eg: your user, host, or server name) [server]: $ ./easyrsa sign-req server server Confirm request details: `yes` Enter pass phrase for /etc/openvpn/easy-rsa/3.0/pki/private/ca.key: PASSWORD","title":"Generate Certificates"},{"location":"system/openVpn_shadowsocks/#configure-firewalld","text":"$ vim /etc/sysctl.conf net.ipv4.ip_forward = 1 $ sysctl -p $ firewall-cmd --state $ firewall-cmd --zone=public --list-all $ firewall-cmd --add-service=openvpn --permanent $ firewall-cmd --add-port=1194/udp --permanent $ firewall-cmd --add-source=10.8.0.0 --permanent $ firewall-cmd --query-source=10.8.0.0 --permanent $ firewall-cmd --add-masquerade --permanent $ firewall-cmd --query-masquerade --permanent $ firewall-cmd --reload","title":"Configure Firewalld"},{"location":"system/openVpn_shadowsocks/#started-openvpn-server","text":"openvpn --config /etc/openvpn/server.conf --daemon --askpass Enter Private Key Password: PASSWORD","title":"Started OpenVpn Server"},{"location":"system/openVpn_shadowsocks/#create-user","text":"$ cd /etc/openvpn/easy-rsa/3.0 $ ./easyrsa build-client-full client_001 Enter PEM pass phrase: CLIENT_001_PASSWORD Verifying - Enter PEM pass phrase: CLIENT_001_PASSWORD Enter pass phrase for /etc/openvpn/easy-rsa/3.0/pki/private/ca.key: PASSWORD","title":"Create User"},{"location":"system/openVpn_shadowsocks/#client","text":"https://openvpn.net/index.php/open-source/downloads.html # /etc/openvpn/easy-rsa/3.0/pki/issued/client_001.crt # /etc/openvpn/easy-rsa/3.0/pki/private/client_002.key # /etc/openvpn/easy-rsa/3.0/pki/ca.crt # /etc/openvpn/ta.key $ vim client_001.ovpn client remote `REMOTE IPADDRESS` 1194 dev tun proto udp ca ca.crt cert client_001.crt key client_001.key persist-key persist-tun tls-auth ta.key 1 keepalive 10 120 resolv-retry infinite ns-cert-type server nobind comp-lzo verb 5 redirect-gateway route-method exe route-delay 2 status user_001-status.log log-append user_001.log","title":"Client"},{"location":"system/openVpn_shadowsocks/#shadowsocks","text":"","title":"Shadowsocks"},{"location":"system/openVpn_shadowsocks/#server","text":"https://github.com/v2ray/v2ray-core https://intmainreturn0.com/v2ray-config-gen","title":"server"},{"location":"system/openVpn_shadowsocks/#client_1","text":"https://github.com/shadowsocks","title":"client"},{"location":"system/virus_intrusion/","text":"Virus_intrusion Problem CPU 100% KILL \u4e4b\u540e\u53c8\u542f\u52a8\u4e86 Analysis \u6253\u5f00\u8bf7\u6c42\u7684\u5730\u5740, \u7528 base64 \u89e3\u7801\u53d1\u73b0\u662fSHELL\u811a\u672c, \u7b80\u5355\u7684\u8fc7\u4e86\u4e0b\u811a\u672c\u53d1\u73b0 \u8986\u76d6\u8ba1\u5212\u4efb\u52a1 \u6dfb\u52a0\u4e09\u4e2a\u6267\u884c\u6587\u4ef6 Solution 1: KILL\u6389\u670d\u52a1 ps auxf|grep -v grep|grep \"watchbog\" | awk '{print $2}'|xargs kill -9 2: \u628a\u8ba1\u5212\u4efb\u52a1\u8fd8\u539f find /etc -name \\* -type f -print | xargs grep \"pastebin\" 3: \u5220\u9664\u4e09\u4e2a\u6267\u884c\u6587\u4ef6 /usr/bin/httpntp /usr/bin/watchbog /usr/bin/ftpsdns Avoid \u670d\u52a1\u5668SSH\u9650\u5236IP\u767b\u5f55 && \u4e0d\u5141\u8bb8\u5bc6\u7801\u767b\u9646 \u9632\u706b\u5899\u5f00\u653e\u7aef\u53e3\u6700\u5c0f\u5316","title":"Virus_intrusion"},{"location":"system/virus_intrusion/#virus_intrusion","text":"","title":"Virus_intrusion"},{"location":"system/virus_intrusion/#problem","text":"CPU 100% KILL \u4e4b\u540e\u53c8\u542f\u52a8\u4e86","title":"Problem"},{"location":"system/virus_intrusion/#analysis","text":"\u6253\u5f00\u8bf7\u6c42\u7684\u5730\u5740, \u7528 base64 \u89e3\u7801\u53d1\u73b0\u662fSHELL\u811a\u672c, \u7b80\u5355\u7684\u8fc7\u4e86\u4e0b\u811a\u672c\u53d1\u73b0 \u8986\u76d6\u8ba1\u5212\u4efb\u52a1 \u6dfb\u52a0\u4e09\u4e2a\u6267\u884c\u6587\u4ef6","title":"Analysis"},{"location":"system/virus_intrusion/#solution","text":"1: KILL\u6389\u670d\u52a1 ps auxf|grep -v grep|grep \"watchbog\" | awk '{print $2}'|xargs kill -9 2: \u628a\u8ba1\u5212\u4efb\u52a1\u8fd8\u539f find /etc -name \\* -type f -print | xargs grep \"pastebin\" 3: \u5220\u9664\u4e09\u4e2a\u6267\u884c\u6587\u4ef6 /usr/bin/httpntp /usr/bin/watchbog /usr/bin/ftpsdns","title":"Solution"},{"location":"system/virus_intrusion/#avoid","text":"\u670d\u52a1\u5668SSH\u9650\u5236IP\u767b\u5f55 && \u4e0d\u5141\u8bb8\u5bc6\u7801\u767b\u9646 \u9632\u706b\u5899\u5f00\u653e\u7aef\u53e3\u6700\u5c0f\u5316","title":"Avoid"}]}